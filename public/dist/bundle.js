(()=>{"use strict";function e(e,t,n){const r=n.value;return{configurable:!0,enumerable:!1,get(){return r.bind(this)}}}var t;!function(e){e[e.Active=0]="Active",e[e.Finished=1]="Finished"}(t||(t={}));class n{constructor(e,t,n,r){this.title=e,this.description=t,this.numOfPeople=n,this.status=r}}class r{constructor(){this.listeners=[]}addListeners(e){this.listeners.push(e)}}class s extends r{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new s),this.instance}addProject(e,t,r,s){const i=new n(e,t,r,s);this.projects.push(i),this.updateListeners()}changeStatus(e,t){const n=this.projects.find((t=>t.title===e));n&&(n.status=t),this.updateListeners()}updateListeners(){for(let e of this.listeners)e(this.projects.slice())}}const i=s.getInstance();function l(e){let t=!0;return e.required&&(t=t&&0!==e.value.toString().trim().length),null!=e.minLength&&"string"==typeof e.value&&(t=t&&e.value.trim().length>e.minLength),null!=e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.trim().length<e.maxLength),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value<e.min),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value>e.max),t}class o{constructor(e,t,n,r){this.inputTemplate=document.getElementById(e),this.hostElement=document.getElementById(t);const s=document.importNode(this.inputTemplate.content,!0);this.element=s.firstElementChild,r&&(this.element.id=r),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}class a extends o{constructor(){super("project-input","app",!0,"user-input"),this.renderContent(),this.configure()}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}validateInputs(){const e={title:this.titleInputElement.value,desc:this.descriptionInputElement.value,people:this.peopleInputElement.value},t={value:e.desc,required:!0,minLength:5},n={value:e.people,required:!0,max:5,min:0};return l({value:e.title,required:!0})&&l(t)&&l(n)?[e.title,e.desc,+e.people]:void alert("Wrong Input")}submitHandler(e){e.preventDefault();const n=this.validateInputs();if(Array.isArray(n)){const[e,r,s]=n;i.addProject(e,r,s,t.Active),this.clearInputs()}}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people")}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([e],a.prototype,"submitHandler",null);class c extends o{get personText(){const{numOfPeople:e}=this.project;return 1===e?"1 person":`${e} persons`}constructor(e,t){super("single-project",e,!0,t.title),this.project=t,this.configure(),this.renderContent()}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.title),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.personText+" assigned",this.element.querySelector("p").textContent=this.project.description}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([e],c.prototype,"dragStartHandler",null);var d=function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l};class u extends o{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}dropHandler(e){i.changeStatus(e.dataTransfer.getData("text/plain"),"active"==this.type?t.Active:t.Finished)}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),i.addListeners((e=>{const n=e.filter((e=>"active"===this.type?e.status===t.Active:e.status===t.Finished));this.assignedProjects=n,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=`${this.type.toUpperCase()} PROJECTS`}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";for(const e of this.assignedProjects)new c(this.element.querySelector("ul").id,e)}}d([e],u.prototype,"dragOverHandler",null),d([e],u.prototype,"dragLeaveHandler",null),d([e],u.prototype,"dropHandler",null),new a,new u("active"),new u("finished")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixDQUdBQyxZQUFZZixHQUNWdkQsRUFBYVAsYUFDWDhELEVBQU1DLGFBQWNlLFFBQVEsY0FDZixVQUFicEcsS0FBSzJGLEtBQW1CMUYsRUFBTzZFLE9BQVM3RSxFQUFPb0csU0FFbkQsQ0FFQXhDLFlBQ0U3RCxLQUFLc0QsUUFBUXlCLGlCQUFpQixXQUFZL0UsS0FBSzZGLGlCQUMvQzdGLEtBQUtzRCxRQUFReUIsaUJBQWlCLFlBQWEvRSxLQUFLaUcsa0JBQ2hEakcsS0FBS3NELFFBQVF5QixpQkFBaUIsT0FBUS9FLEtBQUttRyxhQUUzQ3RFLEVBQWFuQixjQUFjSyxJQUN6QixNQUFNdUYsRUFBbUJ2RixFQUFTd0YsUUFBUTVFLEdBQ3RCLFdBQWQzQixLQUFLMkYsS0FDQWhFLEVBQUlwQixTQUFXTixFQUFPNkUsT0FFeEJuRCxFQUFJcEIsU0FBV04sRUFBT29HLFdBRS9CckcsS0FBSzRGLGlCQUFtQlUsRUFDeEJ0RyxLQUFLd0csZ0JBQWdCLEdBRXpCLENBRUE1QyxnQkFDRSxNQUFNNkMsRUFBUyxHQUFHekcsS0FBSzJGLHFCQUN2QjNGLEtBQUtzRCxRQUFRMEIsY0FBYyxNQUFPeEIsR0FBS2lELEVBQ3ZDekcsS0FBS3NELFFBQVEwQixjQUNYLE1BQ0NTLFlBQWMsR0FBR3pGLEtBQUsyRixLQUFLZSx3QkFDaEMsQ0FFUUYsaUJBQ1N4RCxTQUFTQyxlQUN0QixHQUFHakQsS0FBSzJGLHNCQUVIZ0IsVUFBWSxHQUNuQixJQUFLLE1BQU1DLEtBQVc1RyxLQUFLNEYsaUJBQ3pCLElBQUlYLEVBQVlqRixLQUFLc0QsUUFBUTBCLGNBQWMsTUFBT3hCLEdBQUlvRCxFQUUxRCxFQXZEQSxHQURDdEgsRyxvQ0FVRCxHQURDQSxHLHFDQU9ELEdBRENBLEcsZ0NDbENILElBQUlxRSxFQUNKLElBQUkrQixFQUFZLFVBQ2hCLElBQUlBLEVBQVksVyIsInNvdXJjZXMiOlsid2VicGFjazovL3Byai8uL3NyYy9kZWNvcmF0b3JzL2F1dG9iaW5kLnRzIiwid2VicGFjazovL3Byai8uL3NyYy9tb2RlbHMvcHJvamVjdC50cyIsIndlYnBhY2s6Ly9wcmovLi9zcmMvc3RhdGUvcHJvamVjdC1zdGF0ZS50cyIsIndlYnBhY2s6Ly9wcmovLi9zcmMvdXRpbHMvdmFsaWRhdGlvbi50cyIsIndlYnBhY2s6Ly9wcmovLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWJhc2VjbGFzcy50cyIsIndlYnBhY2s6Ly9wcmovLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWlucHV0cy50cyIsIndlYnBhY2s6Ly9wcmovLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vcHJqLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1saXN0LnRzIiwid2VicGFjazovL3Byai8uL3NyYy9hcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIEF1dG9iaW5kKFxyXG4gIF90YXJnZXQ6IGFueSxcclxuICBfbWV0aG9kTmFtZTogc3RyaW5nIHwgU3ltYm9sIHwgbnVtYmVyLFxyXG4gIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvclxyXG4pIHtcclxuICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XHJcbiAgY29uc3QgYWRqRGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yID0ge1xyXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICBnZXQoKSB7XHJcbiAgICAgIGNvbnN0IGJvdW5kRm4gPSBvcmlnaW5hbE1ldGhvZC5iaW5kKHRoaXMpO1xyXG4gICAgICByZXR1cm4gYm91bmRGbjtcclxuICAgIH0sXHJcbiAgfTtcclxuICByZXR1cm4gYWRqRGVzY3JpcHRvcjtcclxufVxyXG4iLCJleHBvcnQgZW51bSBTdGF0dXMge1xyXG4gIEFjdGl2ZSxcclxuICBGaW5pc2hlZCxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIHRpdGxlOiBzdHJpbmcsXHJcbiAgICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgIHB1YmxpYyBudW1PZlBlb3BsZTogbnVtYmVyLFxyXG4gICAgcHVibGljIHN0YXR1czogU3RhdHVzXHJcbiAgKSB7fVxyXG59XHJcbiIsImltcG9ydCB7IFByb2plY3QsIFN0YXR1cyB9IGZyb20gXCIuLi9tb2RlbHMvcHJvamVjdFwiO1xyXG5cclxudHlwZSBMaXN0ZW5lcjxFbnRyeVR5cGU+ID0gKGl0ZW1zOiBFbnRyeVR5cGVbXSkgPT4gdm9pZDtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQcm9qZWN0IFN0YXRlIE1hbmFnZW1lbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNsYXNzIEJhc2VTdGF0ZTxTdGF0ZVR5cGU+IHtcclxuICBwcm90ZWN0ZWQgbGlzdGVuZXJzOiBMaXN0ZW5lcjxTdGF0ZVR5cGU+W10gPSBbXTtcclxuXHJcbiAgYWRkTGlzdGVuZXJzKGxpc3RlbmVyRm46IExpc3RlbmVyPFN0YXRlVHlwZT4pIHtcclxuICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdFN0YXRlIGV4dGVuZHMgQmFzZVN0YXRlPFByb2plY3Q+IHtcclxuICBwcml2YXRlIHByb2plY3RzOiBQcm9qZWN0W10gPSBbXTtcclxuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogUHJvamVjdFN0YXRlO1xyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcclxuICAgIGlmICh0aGlzLmluc3RhbmNlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBQcm9qZWN0U3RhdGUoKTtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRQcm9qZWN0KFxyXG4gICAgdGl0bGU6IHN0cmluZyxcclxuICAgIGRlc2M6IHN0cmluZyxcclxuICAgIG51bU9mUGVvcGxlOiBudW1iZXIsXHJcbiAgICBzdGF0dXM6IFN0YXR1cy5BY3RpdmVcclxuICApIHtcclxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdCh0aXRsZSwgZGVzYywgbnVtT2ZQZW9wbGUsIHN0YXR1cyk7XHJcbiAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3UHJvamVjdCk7XHJcbiAgICB0aGlzLnVwZGF0ZUxpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlU3RhdHVzKHRpdGxlT2ZTZWxlY3RlZFByajogc3RyaW5nLCBuZXdTdGF0dXM6IFN0YXR1cykge1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHRoaXMucHJvamVjdHMuZmluZChcclxuICAgICAgKHByaikgPT4gcHJqLnRpdGxlID09PSB0aXRsZU9mU2VsZWN0ZWRQcmpcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHByb2plY3QpIHtcclxuICAgICAgcHJvamVjdC5zdGF0dXMgPSBuZXdTdGF0dXM7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlTGlzdGVuZXJzKCkge1xyXG4gICAgZm9yIChsZXQgbGlzdGVuZXJGbiBvZiB0aGlzLmxpc3RlbmVycykge1xyXG4gICAgICBsaXN0ZW5lckZuKHRoaXMucHJvamVjdHMuc2xpY2UoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcHJvamVjdFN0YXRlID0gUHJvamVjdFN0YXRlLmdldEluc3RhbmNlKCk7XHJcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQcm9qZWN0IFZhbGlkYXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGFibGUge1xyXG4gIHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7XHJcbiAgcmVxdWlyZWQ/OiBib29sZWFuO1xyXG4gIG1pbkxlbmd0aD86IG51bWJlcjtcclxuICBtYXhMZW5ndGg/OiBudW1iZXI7XHJcbiAgbWluPzogbnVtYmVyO1xyXG4gIG1heD86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKHZhbGlkYXRhYmxlSW5wdXQ6IFZhbGlkYXRhYmxlKTogYm9vbGVhbiB7XHJcbiAgbGV0IGlzVmFsaWQgPSB0cnVlO1xyXG4gIGlmICh2YWxpZGF0YWJsZUlucHV0LnJlcXVpcmVkKSB7XHJcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCAhPT0gMDtcclxuICB9XHJcbiAgaWYgKFxyXG4gICAgdmFsaWRhdGFibGVJbnB1dC5taW5MZW5ndGggIT0gbnVsbCAmJlxyXG4gICAgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09IFwic3RyaW5nXCJcclxuICApIHtcclxuICAgIGlzVmFsaWQgPVxyXG4gICAgICBpc1ZhbGlkICYmXHJcbiAgICAgIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUudHJpbSgpLmxlbmd0aCA+IHZhbGlkYXRhYmxlSW5wdXQubWluTGVuZ3RoO1xyXG4gIH1cclxuICBpZiAoXHJcbiAgICB2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aCAhPSBudWxsICYmXHJcbiAgICB0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gXCJzdHJpbmdcIlxyXG4gICkge1xyXG4gICAgaXNWYWxpZCA9XHJcbiAgICAgIGlzVmFsaWQgJiZcclxuICAgICAgdmFsaWRhdGFibGVJbnB1dC52YWx1ZS50cmltKCkubGVuZ3RoIDwgdmFsaWRhdGFibGVJbnB1dC5tYXhMZW5ndGg7XHJcbiAgfVxyXG4gIGlmIChcclxuICAgIHZhbGlkYXRhYmxlSW5wdXQubWluICE9IG51bGwgJiZcclxuICAgIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSBcIm51bWJlclwiXHJcbiAgKSB7XHJcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlIDwgdmFsaWRhdGFibGVJbnB1dC5taW47XHJcbiAgfVxyXG4gIGlmIChcclxuICAgIHZhbGlkYXRhYmxlSW5wdXQubWF4ICE9IG51bGwgJiZcclxuICAgIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSBcIm51bWJlclwiXHJcbiAgKSB7XHJcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID4gdmFsaWRhdGFibGVJbnB1dC5tYXg7XHJcbiAgfVxyXG4gIHJldHVybiBpc1ZhbGlkO1xyXG59XHJcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQmFzZSBDbGFzcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlQ2xhc3M8XHJcbiAgSG9zdEVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCxcclxuICBFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnRcclxuPiB7XHJcbiAgaW5wdXRUZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICBob3N0RWxlbWVudDogSG9zdEVsZW1lbnQ7XHJcbiAgZWxlbWVudDogRWxlbWVudDtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpbnB1dFRlbXBsYXRlSWQ6IHN0cmluZyxcclxuICAgIGhvc3RFbGVtZW50SWQ6IHN0cmluZyxcclxuICAgIGluc2VydEF0U3RhcnQ6IGJvb2xlYW4sXHJcbiAgICBuZXdFbGVtZW50SWQ/OiBzdHJpbmdcclxuICApIHtcclxuICAgIHRoaXMuaW5wdXRUZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgICBpbnB1dFRlbXBsYXRlSWRcclxuICAgICkhIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgICB0aGlzLmhvc3RFbGVtZW50ID0gPEhvc3RFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhvc3RFbGVtZW50SWQpITtcclxuICAgIGNvbnN0IGltcG9ydGVkTm9kZSA9IGRvY3VtZW50LmltcG9ydE5vZGUodGhpcy5pbnB1dFRlbXBsYXRlLmNvbnRlbnQsIHRydWUpO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gPEVsZW1lbnQ+aW1wb3J0ZWROb2RlLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgaWYgKG5ld0VsZW1lbnRJZCkge1xyXG4gICAgICB0aGlzLmVsZW1lbnQuaWQgPSBuZXdFbGVtZW50SWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hdHRhY2goaW5zZXJ0QXRTdGFydCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGF0dGFjaChpbnNlcnRBdFN0YXJ0OiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmhvc3RFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcclxuICAgICAgaW5zZXJ0QXRTdGFydCA/IFwiYWZ0ZXJiZWdpblwiIDogXCJiZWZvcmVlbmRcIixcclxuICAgICAgdGhpcy5lbGVtZW50XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgYWJzdHJhY3QgY29uZmlndXJlKCk6IHZvaWQ7XHJcbiAgYWJzdHJhY3QgcmVuZGVyQ29udGVudCgpOiB2b2lkO1xyXG59XHJcbiIsImltcG9ydCB7IEF1dG9iaW5kIH0gZnJvbSBcIi4uL2RlY29yYXRvcnMvYXV0b2JpbmRcIjtcclxuaW1wb3J0IHsgU3RhdHVzIH0gZnJvbSBcIi4uL21vZGVscy9wcm9qZWN0XCI7XHJcbmltcG9ydCB7IHByb2plY3RTdGF0ZSB9IGZyb20gXCIuLi9zdGF0ZS9wcm9qZWN0LXN0YXRlXCI7XHJcbmltcG9ydCB7IFZhbGlkYXRhYmxlLCB2YWxpZGF0ZSB9IGZyb20gXCIuLi91dGlscy92YWxpZGF0aW9uXCI7XHJcbmltcG9ydCB7IEJhc2VDbGFzcyB9IGZyb20gXCIuL3Byb2plY3QtYmFzZWNsYXNzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdElucHV0IGV4dGVuZHMgQmFzZUNsYXNzPEhUTUxEaXZFbGVtZW50LCBIVE1MRm9ybUVsZW1lbnQ+IHtcclxuICB0aXRsZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuICBkZXNjcmlwdGlvbklucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuICBwZW9wbGVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoXCJwcm9qZWN0LWlucHV0XCIsIFwiYXBwXCIsIHRydWUsIFwidXNlci1pbnB1dFwiKTtcclxuICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gICAgdGhpcy5jb25maWd1cmUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2xlYXJJbnB1dHMoKSB7XHJcbiAgICB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB2YWxpZGF0ZUlucHV0cygpOiBbc3RyaW5nLCBzdHJpbmcsIG51bWJlcl0gfCB2b2lkIHtcclxuICAgIGNvbnN0IGVudGVyZWQgPSB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlLFxyXG4gICAgICBkZXNjOiB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50LnZhbHVlLFxyXG4gICAgICBwZW9wbGU6IHRoaXMucGVvcGxlSW5wdXRFbGVtZW50LnZhbHVlLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB0aXRsZVZhbGlkYXRpb246IFZhbGlkYXRhYmxlID0ge1xyXG4gICAgICB2YWx1ZTogZW50ZXJlZC50aXRsZSxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGRlc2NyaXB0aW9uVmFsaWRhdGlvbjogVmFsaWRhdGFibGUgPSB7XHJcbiAgICAgIHZhbHVlOiBlbnRlcmVkLmRlc2MsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICBtaW5MZW5ndGg6IDUsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHBlb3BsZVZhbGlkYXRpb246IFZhbGlkYXRhYmxlID0ge1xyXG4gICAgICB2YWx1ZTogZW50ZXJlZC5wZW9wbGUsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICBtYXg6IDUsXHJcbiAgICAgIG1pbjogMCxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICAhdmFsaWRhdGUodGl0bGVWYWxpZGF0aW9uKSB8fFxyXG4gICAgICAhdmFsaWRhdGUoZGVzY3JpcHRpb25WYWxpZGF0aW9uKSB8fFxyXG4gICAgICAhdmFsaWRhdGUocGVvcGxlVmFsaWRhdGlvbilcclxuICAgICkge1xyXG4gICAgICBhbGVydChcIldyb25nIElucHV0XCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gW2VudGVyZWQudGl0bGUsIGVudGVyZWQuZGVzYywgK2VudGVyZWQucGVvcGxlXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBBdXRvYmluZFxyXG4gIHByaXZhdGUgc3VibWl0SGFuZGxlcihlOiBFdmVudCkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgdXNlcklucHV0cyA9IHRoaXMudmFsaWRhdGVJbnB1dHMoKTtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHVzZXJJbnB1dHMpKSB7XHJcbiAgICAgIGNvbnN0IFt0aXRsZSwgZGVzYywgcGVvcGxlXSA9IHVzZXJJbnB1dHM7XHJcbiAgICAgIHByb2plY3RTdGF0ZS5hZGRQcm9qZWN0KHRpdGxlLCBkZXNjLCBwZW9wbGUsIFN0YXR1cy5BY3RpdmUpO1xyXG4gICAgICB0aGlzLmNsZWFySW5wdXRzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25maWd1cmUoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLnN1Ym1pdEhhbmRsZXIpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ29udGVudCgpOiB2b2lkIHtcclxuICAgIHRoaXMudGl0bGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjdGl0bGVcIlxyXG4gICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNkZXNjcmlwdGlvblwiXHJcbiAgICApIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICB0aGlzLnBlb3BsZUlucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNwZW9wbGVcIlxyXG4gICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBdXRvYmluZCB9IGZyb20gXCIuLi9kZWNvcmF0b3JzL2F1dG9iaW5kXCI7XHJcbmltcG9ydCB7IERyYWdnYWJsZSB9IGZyb20gXCIuLi9tb2RlbHMvZHJhZy1kcm9wXCI7XHJcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi4vbW9kZWxzL3Byb2plY3RcIjtcclxuaW1wb3J0IHsgQmFzZUNsYXNzIH0gZnJvbSBcIi4vcHJvamVjdC1iYXNlY2xhc3NcIjtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQcm9qZWN0IEl0ZW0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0SXRlbVxyXG4gIGV4dGVuZHMgQmFzZUNsYXNzPEhUTUxVTGlzdEVsZW1lbnQsIEhUTUxMSUVsZW1lbnQ+XHJcbiAgaW1wbGVtZW50cyBEcmFnZ2FibGVcclxue1xyXG4gIHByaXZhdGUgcHJvamVjdDogUHJvamVjdDtcclxuXHJcbiAgZ2V0IHBlcnNvblRleHQoKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHsgbnVtT2ZQZW9wbGUgfSA9IHRoaXMucHJvamVjdDtcclxuXHJcbiAgICBpZiAobnVtT2ZQZW9wbGUgPT09IDEpIHtcclxuICAgICAgcmV0dXJuIFwiMSBwZXJzb25cIjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYCR7bnVtT2ZQZW9wbGV9IHBlcnNvbnNgO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoaG9zdEVsZW1lbnRJZDogc3RyaW5nLCBwcm9qZWN0OiBQcm9qZWN0KSB7XHJcbiAgICBzdXBlcihcInNpbmdsZS1wcm9qZWN0XCIsIGhvc3RFbGVtZW50SWQsIHRydWUsIHByb2plY3QudGl0bGUpO1xyXG4gICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuXHJcbiAgICB0aGlzLmNvbmZpZ3VyZSgpO1xyXG4gICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XHJcbiAgfVxyXG5cclxuICBAQXV0b2JpbmRcclxuICBkcmFnU3RhcnRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuc2V0RGF0YShcInRleHQvcGxhaW5cIiwgdGhpcy5wcm9qZWN0LnRpdGxlKTtcclxuICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuZWZmZWN0QWxsb3dlZCA9IFwibW92ZVwiO1xyXG4gIH1cclxuXHJcbiAgZHJhZ0VuZEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge31cclxuXHJcbiAgY29uZmlndXJlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgdGhpcy5kcmFnU3RhcnRIYW5kbGVyKTtcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VuZFwiLCB0aGlzLmRyYWdFbmRIYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckNvbnRlbnQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImgyXCIpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC50aXRsZTtcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaDNcIikhLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5wZXJzb25UZXh0ICsgXCIgYXNzaWduZWRcIjtcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwicFwiKSEudGV4dENvbnRlbnQgPSB0aGlzLnByb2plY3QuZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEF1dG9iaW5kIH0gZnJvbSBcIi4uL2RlY29yYXRvcnMvYXV0b2JpbmRcIjtcclxuaW1wb3J0IHsgRHJhZ1RhcmdldCB9IGZyb20gXCIuLi9tb2RlbHMvZHJhZy1kcm9wXCI7XHJcbmltcG9ydCB7IFByb2plY3QsIFN0YXR1cyB9IGZyb20gXCIuLi9tb2RlbHMvcHJvamVjdFwiO1xyXG5pbXBvcnQgeyBwcm9qZWN0U3RhdGUgfSBmcm9tIFwiLi4vc3RhdGUvcHJvamVjdC1zdGF0ZVwiO1xyXG5pbXBvcnQgeyBCYXNlQ2xhc3MgfSBmcm9tIFwiLi9wcm9qZWN0LWJhc2VjbGFzc1wiO1xyXG5pbXBvcnQgeyBQcm9qZWN0SXRlbSB9IGZyb20gXCIuL3Byb2plY3QtaXRlbVwiO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFByb2plY3QgTGlzdCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuZXhwb3J0IGNsYXNzIFByb2plY3RMaXN0XHJcbiAgZXh0ZW5kcyBCYXNlQ2xhc3M8SFRNTERpdkVsZW1lbnQsIEhUTUxFbGVtZW50PlxyXG4gIGltcGxlbWVudHMgRHJhZ1RhcmdldFxyXG57XHJcbiAgYXNzaWduZWRQcm9qZWN0czogUHJvamVjdFtdO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHR5cGU6IFwiYWN0aXZlXCIgfCBcImZpbmlzaGVkXCIpIHtcclxuICAgIHN1cGVyKFwicHJvamVjdC1saXN0XCIsIFwiYXBwXCIsIGZhbHNlLCBgJHt0eXBlfS1wcm9qZWN0c2ApO1xyXG5cclxuICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IFtdO1xyXG4gICAgdGhpcy5jb25maWd1cmUoKTtcclxuICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gIH1cclxuXHJcbiAgQEF1dG9iaW5kXHJcbiAgZHJhZ092ZXJIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIgJiYgZXZlbnQuZGF0YVRyYW5zZmVyLnR5cGVzWzBdID09PSBcInRleHQvcGxhaW5cIikge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCBsaXN0RWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcInVsXCIpITtcclxuICAgICAgbGlzdEVsLmNsYXNzTGlzdC5hZGQoXCJkcm9wcGFibGVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBAQXV0b2JpbmRcclxuICBkcmFnTGVhdmVIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuICAgIGNvbnN0IGxpc3RFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwidWxcIikhO1xyXG4gICAgbGlzdEVsLmNsYXNzTGlzdC5yZW1vdmUoXCJkcm9wcGFibGVcIik7XHJcbiAgfVxyXG5cclxuICBAQXV0b2JpbmRcclxuICBkcm9wSGFuZGxlcihldmVudDogRHJhZ0V2ZW50KTogdm9pZCB7XHJcbiAgICBwcm9qZWN0U3RhdGUuY2hhbmdlU3RhdHVzKFxyXG4gICAgICBldmVudC5kYXRhVHJhbnNmZXIhLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpLFxyXG4gICAgICB0aGlzLnR5cGUgPT0gXCJhY3RpdmVcIiA/IFN0YXR1cy5BY3RpdmUgOiBTdGF0dXMuRmluaXNoZWRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjb25maWd1cmUoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIHRoaXMuZHJhZ092ZXJIYW5kbGVyKTtcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsIHRoaXMuZHJhZ0xlYXZlSGFuZGxlcik7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgdGhpcy5kcm9wSGFuZGxlcik7XHJcblxyXG4gICAgcHJvamVjdFN0YXRlLmFkZExpc3RlbmVycygocHJvamVjdHM6IFByb2plY3RbXSkgPT4ge1xyXG4gICAgICBjb25zdCByZXZlbGFudFByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKChwcmopID0+IHtcclxuICAgICAgICBpZiAodGhpcy50eXBlID09PSBcImFjdGl2ZVwiKSB7XHJcbiAgICAgICAgICByZXR1cm4gcHJqLnN0YXR1cyA9PT0gU3RhdHVzLkFjdGl2ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByai5zdGF0dXMgPT09IFN0YXR1cy5GaW5pc2hlZDtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IHJldmVsYW50UHJvamVjdHM7XHJcbiAgICAgIHRoaXMucmVuZGVyUHJvamVjdHMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ29udGVudCgpIHtcclxuICAgIGNvbnN0IGxpc3RJZCA9IGAke3RoaXMudHlwZX0tcHJvamVjdHMtbGlzdGA7XHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcInVsXCIpIS5pZCA9IGxpc3RJZDtcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcImgyXCJcclxuICAgICkhLnRleHRDb250ZW50ID0gYCR7dGhpcy50eXBlLnRvVXBwZXJDYXNlKCl9IFBST0pFQ1RTYDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVuZGVyUHJvamVjdHMoKSB7XHJcbiAgICBjb25zdCBsaXN0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgICAgYCR7dGhpcy50eXBlfS1wcm9qZWN0cy1saXN0YFxyXG4gICAgKSEgYXMgSFRNTFVMaXN0RWxlbWVudDtcclxuICAgIGxpc3RFbC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgZm9yIChjb25zdCBwcmpJbmZvIG9mIHRoaXMuYXNzaWduZWRQcm9qZWN0cykge1xyXG4gICAgICBuZXcgUHJvamVjdEl0ZW0odGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ1bFwiKSEuaWQsIHByakluZm8pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQcm9qZWN0SW5wdXQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Byb2plY3QtaW5wdXRzXCI7XHJcbmltcG9ydCB7IFByb2plY3RMaXN0IH0gZnJvbSBcIi4vY29tcG9uZW50cy9wcm9qZWN0LWxpc3RcIjtcclxuXHJcbm5ldyBQcm9qZWN0SW5wdXQoKTtcclxubmV3IFByb2plY3RMaXN0KFwiYWN0aXZlXCIpO1xyXG5uZXcgUHJvamVjdExpc3QoXCJmaW5pc2hlZFwiKTtcclxuIl0sIm5hbWVzIjpbIkF1dG9iaW5kIiwiX3RhcmdldCIsIl9tZXRob2ROYW1lIiwiZGVzY3JpcHRvciIsIm9yaWdpbmFsTWV0aG9kIiwidmFsdWUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiYmluZCIsInRoaXMiLCJTdGF0dXMiLCJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwibnVtT2ZQZW9wbGUiLCJzdGF0dXMiLCJCYXNlU3RhdGUiLCJsaXN0ZW5lcnMiLCJhZGRMaXN0ZW5lcnMiLCJsaXN0ZW5lckZuIiwicHVzaCIsIlByb2plY3RTdGF0ZSIsInN1cGVyIiwicHJvamVjdHMiLCJzdGF0aWMiLCJpbnN0YW5jZSIsImFkZFByb2plY3QiLCJkZXNjIiwibmV3UHJvamVjdCIsInVwZGF0ZUxpc3RlbmVycyIsImNoYW5nZVN0YXR1cyIsInRpdGxlT2ZTZWxlY3RlZFByaiIsIm5ld1N0YXR1cyIsInByb2plY3QiLCJmaW5kIiwicHJqIiwic2xpY2UiLCJwcm9qZWN0U3RhdGUiLCJnZXRJbnN0YW5jZSIsInZhbGlkYXRlIiwidmFsaWRhdGFibGVJbnB1dCIsImlzVmFsaWQiLCJyZXF1aXJlZCIsInRvU3RyaW5nIiwidHJpbSIsImxlbmd0aCIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsIm1pbiIsIm1heCIsIkJhc2VDbGFzcyIsImlucHV0VGVtcGxhdGVJZCIsImhvc3RFbGVtZW50SWQiLCJpbnNlcnRBdFN0YXJ0IiwibmV3RWxlbWVudElkIiwiaW5wdXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJob3N0RWxlbWVudCIsImltcG9ydGVkTm9kZSIsImltcG9ydE5vZGUiLCJjb250ZW50IiwiZWxlbWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiaWQiLCJhdHRhY2giLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJQcm9qZWN0SW5wdXQiLCJyZW5kZXJDb250ZW50IiwiY29uZmlndXJlIiwiY2xlYXJJbnB1dHMiLCJ0aXRsZUlucHV0RWxlbWVudCIsImRlc2NyaXB0aW9uSW5wdXRFbGVtZW50IiwicGVvcGxlSW5wdXRFbGVtZW50IiwidmFsaWRhdGVJbnB1dHMiLCJlbnRlcmVkIiwicGVvcGxlIiwiZGVzY3JpcHRpb25WYWxpZGF0aW9uIiwicGVvcGxlVmFsaWRhdGlvbiIsImFsZXJ0Iiwic3VibWl0SGFuZGxlciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJJbnB1dHMiLCJBcnJheSIsImlzQXJyYXkiLCJBY3RpdmUiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsIlByb2plY3RJdGVtIiwicGVyc29uVGV4dCIsImRyYWdTdGFydEhhbmRsZXIiLCJldmVudCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJlZmZlY3RBbGxvd2VkIiwiZHJhZ0VuZEhhbmRsZXIiLCJ0ZXh0Q29udGVudCIsIlByb2plY3RMaXN0IiwidHlwZSIsImFzc2lnbmVkUHJvamVjdHMiLCJkcmFnT3ZlckhhbmRsZXIiLCJ0eXBlcyIsImNsYXNzTGlzdCIsImFkZCIsImRyYWdMZWF2ZUhhbmRsZXIiLCJyZW1vdmUiLCJkcm9wSGFuZGxlciIsImdldERhdGEiLCJGaW5pc2hlZCIsInJldmVsYW50UHJvamVjdHMiLCJmaWx0ZXIiLCJyZW5kZXJQcm9qZWN0cyIsImxpc3RJZCIsInRvVXBwZXJDYXNlIiwiaW5uZXJIVE1MIiwicHJqSW5mbyJdLCJzb3VyY2VSb290IjoiIn0=